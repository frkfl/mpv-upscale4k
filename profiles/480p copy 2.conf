[lowres]
profile-cond=width < 800

# SD Color Correction (BT.601)
#glsl-shaders-append="~~/shaders/sd_color_fix.glsl"
#glsl-shader-opts=contrast=1.20,saturation=1.10,gamma=1.10
#deinterlace
# Strong scanline stabilizer for VHS / analog flicker
#glsl-shaders-append="~~/shaders/smart_scanline_blend_temporal.glsl"
#glsl-shader-opts=strength=0.9,detect=0.25,temporal=0.85,chroma_fix=0.6

#normalize
deinterlace=yes                       # safe for both
#vf-append=lavfi=[chromashift=w=-1.0:h=0] # mild decorrelation
#vf-append=lavfi=[hqdn3d=0:0:3:3]      # chroma blur only
#vf-append=lavfi=[bwdif]               # deinterlace fallback
#vf-append=lavfi=[eq=brightness=0:contrast=1:saturation=1.05]


# Mild native cleanup (decent source)
glsl-shader="~~/shaders/mild_cleanup.glsl"
glsl-shader-opts='luma_radius=2:sigma_r=2.00:chroma_strength=0.85:deblock_strength=0.55:grain_strength=0.009'

# Upscale
glsl-shaders-append=~~/shaders-dl/CfL_Prediction_RT.glsl
glsl-shaders-append=~~/shaders-dl/KrigBilateral.glsl
glsl-shaders-append=~~/shaders-dl/FSRCNNX_x2_8-0-4-1.glsl
glsl-shaders-append="~~/shaders-dl/SSimSuperRes_RT.glsl"

# kill early ringing from the upscalers
glsl-shaders-append="~~/shaders/ringing_guard.glsl"
glsl-shader-opts='strength=1.45:radius=1.5:gamma_in=1.0:gamma_out=1.0:lobe_strength=0.65:lobe_threshold=0.015:lobe_priority=0.65:delta_cap=0.5:apply_threshold=0.02'
# Analogize
# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.56,scan_curve=1.20,bloom_strength=0.30,bloom_radius=1.35,mask_strength=0.42,mask_soft=0.60,chroma_preserve=0.92,sat_boost=1.06,black_lift=0.015,gamma_in=1.0,gamma_out=1.0
glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl
# Downscale step handled by mpv
vf-append=scale=1920:1200:flags=lanczos
# Quality-preserving post filter (runs after scaling)
glsl-shaders-append="~~/shaders/perceptual_downscale_refine.glsl"
glsl-shaders-append="~~/shaders-dl/nlmeans.glsl"
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"

# Quality improvements
# Edge AA (stabilizes FSR/SSim ringing in motion)
glsl-shaders-append="~~/shaders/smaa.glsl"
glsl-shader-opts=edge_strength=0.38,corner_strength=0.22,gamma=1.0
# Tone adaptation
# Smart logarithmic color expansion (adaptive, hue-safe)
#glsl-shaders-append="~~/shaders/color_expand_log_adaptive.glsl"
#glsl-shader-opts=black_level=0.062561,white_level=0.918367,log_strength=12.0,exponent_weight=0.85,adapt_floor=0.68,adapt_ceiling=1.18,adapt_pivot=0.18,adapt_contrast=0.60,chroma_preserve=0.18,soft_knee=0.02
# Chroma Pop (local chroma contrast, luma-safe)
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"

# Final 4K Upscale - hopefully from a better place...
glsl-shaders-append="~~/shaders-dl/CfL_Prediction_RT.glsl"
glsl-shaders-append="~~/shaders-dl/KrigBilateral.glsl"
glsl-shaders-append="~~/shaders-dl/FSRCNNX_x2_8-0-4-1.glsl"
# Hybrid mix of learned upscale with structural reference
glsl-shaders-append="~~/shaders/smart_upscale_mix.glsl"
glsl-shader-opts=strength=1.25,radius=1.5,gamma_in=1.0,gamma_out=1.0,lobe_strength=0.65,lobe_threshold=0.015,lobe_priority=0.65,delta_cap=0.50,apply_threshold=0.02,noise_strength=0.003
glsl-shaders-append="~~/shaders-dl/SSimSuperRes_RT.glsl"

# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.36,scan_curve=1.20,bloom_strength=0.20,bloom_radius=1.35,mask_strength=0.22,mask_soft=0.60,chroma_preserve=0.92,sat_boost=1.06,black_lift=0.025,gamma_in=1.0,gamma_out=1.0

# Light temporal texture
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.03,chroma=0.6,grain_size=1.0
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.01,chroma=0.3,grain_size=2.5

glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl

glsl-shaders-append="~~/shaders-dl/hdeband.glsl"

# Quality improvements
# Edge AA (stabilizes FSR/SSim ringing in motion)
glsl-shaders-append="~~/shaders/smaa.glsl"
glsl-shader-opts=edge_strength=0.38,corner_strength=0.22,gamma=1.0
# Temporal sharpen (TXAA-lite; keep modest)
glsl-shaders-append="~~/shaders/temporal_sharpen.glsl"
glsl-shader-opts=strength=1.50,motion_sense=0.65,decay=0.85,radius=1.0,clamp_amt=0.028,thresh=0.018,gamma_in=1.0,gamma_out=1.0
# Hair-aware sharpen (detail recovery)
glsl-shaders-append="~~/shaders/hair_aware_sharpen.glsl"
glsl-shader-opts=sharp_amt=0.24,hf_gain=1.45,flat_guard=0.92,temp_sense=0.68,clamp_amt=0.026
# Edge-aware sharpen — **reined in** but still strong
glsl-shaders-append="~~/shaders/masked_sharpen.glsl"
glsl-shader-opts=strength=0.40,clamp_amt=0.038,edge_low=0.02,edge_high=0.24,flat_protect=0.88,motion_gate=0.65,gamma_in=1.0,gamma_out=1.0
# Temporal sharpen — **calmer in motion**
glsl-shaders-append="~~/shaders/temporal_sharpen.glsl"
glsl-shader-opts=strength=0.36,motion_sense=0.80,decay=0.90,radius=1.0,clamp_amt=0.034,thresh=0.020,gamma_in=1.0,gamma_out=1.0
# Micro-contrast — a touch less
glsl-shaders-append="~~/shaders/micro_contrast.glsl"
glsl-shader-opts=radius=0.8,amount=0.12,threshold=0.02,gamma_in=1.0,gamma_out=1.0

# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.36,scan_curve=1.20,bloom_strength=0.20,bloom_radius=1.35,mask_strength=0.22,mask_soft=0.60,chroma_preserve=0.92,sat_boost=1.06,black_lift=0.025,gamma_in=1.0,gamma_out=1.0

glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl

# Keep the low-threshold deband after sharpen to erase residual halos
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"


#-- Old 



# kill early ringing from the upscalers
glsl-shaders-append="~~/shaders/ringing_guard.glsl"
glsl-shader-opts='strength=1.45:radius=1.5:gamma_in=1.0:gamma_out=1.0:lobe_strength=0.65:lobe_threshold=0.015:lobe_priority=0.65:delta_cap=0.5:apply_threshold=0.02'
# Analogize
# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.96,scan_curve=1.40,bloom_strength=0.35,bloom_radius=1.35,mask_strength=0.42,mask_soft=0.60,chroma_preserve=0.99,sat_boost=1.06,black_lift=0.025,gamma_in=1.0,gamma_out=1.0
glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl

# 1080p downscale and cleaning
vf-append=scale=1920:1080
glsl-shaders-append="~~/shaders-dl/nlmeans.glsl"
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"
# Light temporal texture
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.03,chroma=0.6,grain_size=1.0
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.01,chroma=0.3,grain_size=2.5

glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl

# Final 4K Upscale - hopefully from a better place...
glsl-shaders-append="~~/shaders-dl/CfL_Prediction_RT.glsl"
glsl-shaders-append="~~/shaders-dl/FSRCNNX_x2_8-0-4-1.glsl"

# Quality improvements
# Edge AA (stabilizes FSR/SSim ringing in motion)
glsl-shaders-append="~~/shaders/smaa.glsl"
glsl-shader-opts=edge_strength=0.38,corner_strength=0.22,gamma=1.0

# Tone adaptation
# Smart logarithmic color expansion (adaptive, hue-safe)
glsl-shaders-append="~~/shaders/color_expand_log_adaptive.glsl"
glsl-shader-opts=black_level=0.062561,white_level=0.918367,log_strength=12.0,exponent_weight=0.85,adapt_floor=0.68,adapt_ceiling=1.18,adapt_pivot=0.18,adapt_contrast=0.60,chroma_preserve=0.18,soft_knee=0.02
# Vibrance (OkLab, luma-preserving, skin-protect)
#glsl-shaders-append="~~/shaders/vibrance_oklab.glsl"
#glsl-shader-opts=vibrance=0.14,skin_protect=0.65,mid_bias=0.18,gamma_in=1.0,gamma_out=1.0
# Chroma Pop (local chroma contrast, luma-safe)
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"
glsl-shaders-append="~~/shaders/chroma_pop.glsl"
# Tone - Skin
# Porcelain / Fair-Neutral
# High reflectance, bluish shadows — protect texture, add warmth.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=0,strength=0.9,diffuse_adj=1.1,specular_adj=0.9,undertone_adj=1.2,reflectance_adj=1.1
# Light-Warm (Golden / Peach)
# Balanced warmth and highlight rolloff — natural cinematic midtone.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=1,strength=0.9,diffuse_adj=1.0,specular_adj=1.0,undertone_adj=1.0,reflectance_adj=1.0
# Olive / Mediterranean
# Preserve subtle green-gold undertones and shadow openness.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=2,strength=0.9,diffuse_adj=1.1,specular_adj=0.9,undertone_adj=1.1,reflectance_adj=1.1
# Tan / Light Brown
# Keep brightness contrast and midrange body — protect highlights.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=3,strength=0.9,diffuse_adj=1.0,specular_adj=1.0,undertone_adj=1.0,reflectance_adj=1.1
# Brown-Warm (Caramel / Bronze)
# Lift separation in low-key scenes, maintain warmth in lights.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=4,strength=0.9,diffuse_adj=1.0,specular_adj=1.0,undertone_adj=1.1,reflectance_adj=1.15
# Deep Brown / Ebony (Cool)
# Preserve texture in low luminance, avoid magenta bias.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=5,strength=1.0,diffuse_adj=1.25,specular_adj=0.9,undertone_adj=1.15,reflectance_adj=1.3
# Deep Warm (Mahogany)
# Keep red/orange undertones natural, manage saturation at highlights.
glsl-shaders-append="~~/shaders/skin_universal.glsl"
glsl-shader-opts=target=6,strength=1.0,diffuse_adj=1.0,specular_adj=0.9,undertone_adj=1.1,reflectance_adj=1.1

# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.56,scan_curve=1.20,bloom_strength=0.30,bloom_radius=1.35,mask_strength=0.42,mask_soft=0.60,chroma_preserve=0.92,sat_boost=1.06,black_lift=0.015,gamma_in=1.0,gamma_out=1.0

# Light temporal texture
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.03,chroma=0.6,grain_size=1.0
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.01,chroma=0.3,grain_size=2.5

glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl

glsl-shaders-append="~~/shaders-dl/hdeband.glsl"

