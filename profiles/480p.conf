[lowres]
profile-cond=width < 800

# Cleaning of all the analogic madness.
# Deinterlace - little risk on windows of not working
deinterlace=auto
# Pre-cleanup and structural normalization
#glsl-shaders-append="~~/shaders/signal_normalize_pre.glsl"
#glsl-shader-opts=analog_bias=1.0,denoise_strength=0.6,phase_max_px=0.5,interlace_blend=0.00,analysis_debug=0
# Post-cleanup and color normalization
#glsl-shaders-append="~~/shaders/color_normalize_post.glsl"
#glsl-shader-opts=neutral_strength=0.5,sat_strength=0.75,tone_strength=0.4,pivot=0.50

# Mild native cleanup (decent source)
#glsl-shader="~~/shaders/mild_cleanup.glsl"
#glsl-shader-opts=luma_radius=2,sigma_r=0.08,chroma_strength=0.7,deblock_strength=0.3,grain_strength=0.006

# Analog pass
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.56,scan_curve=1.20,bloom_strength=0.08,bloom_radius=1.35,mask_strength=0.82,mask_soft=0.80,chroma_preserve=0.99,sat_boost=1.06,black_lift=0.018,gamma_in=1.0,gamma_out=1.0

# Upscaling
glsl-shaders-append="~~/shaders-dl/CfL_Prediction_RT.glsl"
glsl-shaders-append="~~/shaders-dl/KrigBilateral.glsl"
glsl-shaders-append="~~/shaders-dl/FSRCNNX_x2_8-0-4-1.glsl"
# Hybrid mix of learned upscale with structural reference
glsl-shaders-append="~~/shaders/smart_upscale_mix.glsl"
glsl-shader-opts=strength=1.25,radius=1.5,gamma_in=1.0,gamma_out=1.0,lobe_strength=0.65,lobe_threshold=0.015,lobe_priority=0.65,delta_cap=0.50,apply_threshold=0.02,noise_strength=0.003
glsl-shaders-append="~~/shaders-dl/SSimSuperRes_RT.glsl"
# kill early ringing from the upscalers
glsl-shaders-append="~~/shaders/ringing_guard.glsl"
glsl-shader-opts='strength=1.45:radius=1.5:gamma_in=1.0:gamma_out=1.0:lobe_strength=0.65:lobe_threshold=0.015:lobe_priority=0.65:delta_cap=0.5:apply_threshold=0.02'

# Analog pass
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.56,scan_curve=1.20,bloom_strength=0.08,bloom_radius=1.35,mask_strength=0.82,mask_soft=0.80,chroma_preserve=0.99,sat_boost=1.06,black_lift=0.018,gamma_in=1.0,gamma_out=1.0
glsl-shaders-append=~~/shaders-dl/noise_static_luma.hook
glsl-shaders-append=~~/shaders-dl/noise_static_luma.glsl
# Noise
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.01,chroma=0.5,grain_size=1.2
glsl-shaders-append=~~/shaders-dl/noise_static_chroma.glsl
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.010,chroma=0.5,grain_size=1.2


# Downscale
# Gentle optical blur before collapse (simulate lens softness)
vf-pre=unsharp=5:5:-0.6
# Perceptual collapse to 1080p
vf-append=scale=1920:1080:flags=spline+accurate_rnd+full_chroma_int
# Slight sharpen after collapse to restore structure
vf-append=unsharp=5:5:0.25
glsl-shaders-append="~~/shaders-dl/nlmeans_light.glsl"
glsl-shaders-append="~~/shaders-dl/hdeband.glsl"

# Upscaling
glsl-shaders-append="~~/shaders-dl/CfL_Prediction_RT.glsl"
glsl-shaders-append="~~/shaders-dl/KrigBilateral.glsl"
glsl-shaders-append="~~/shaders-dl/FSRCNNX_x2_8-0-4-1.glsl"
# Hybrid mix of learned upscale with structural reference
glsl-shaders-append="~~/shaders/smart_upscale_mix.glsl"
glsl-shader-opts=strength=1.25,radius=1.5,gamma_in=1.0,gamma_out=1.0,lobe_strength=0.65,lobe_threshold=0.015,lobe_priority=0.65,delta_cap=0.50,apply_threshold=0.02,noise_strength=0.003
glsl-shaders-append="~~/shaders-dl/SSimSuperRes_RT.glsl"
# kill early ringing from the upscalers
glsl-shaders-append="~~/shaders/ringing_guard.glsl"
glsl-shader-opts='strength=1.45:radius=1.5:gamma_in=1.0:gamma_out=1.0:lobe_strength=0.65:lobe_threshold=0.015:lobe_priority=0.65:delta_cap=0.5:apply_threshold=0.02'

# Quality improvements
# Edge AA (stabilizes FSR/SSim ringing in motion)
glsl-shaders-append="~~/shaders/smaa.glsl"
glsl-shader-opts=edge_strength=0.48,corner_strength=0.32,gamma=1.0
# Temporal sharpen (TXAA-lite; keep modest)
glsl-shaders-append="~~/shaders/temporal_sharpen.glsl"
glsl-shader-opts=strength=1.80,motion_sense=0.65,decay=0.85,radius=1.0,clamp_amt=0.028,thresh=0.018,gamma_in=1.0,gamma_out=1.0
# Hair-aware sharpen (detail recovery)
glsl-shaders-append="~~/shaders/hair_aware_sharpen.glsl"
glsl-shader-opts=sharp_amt=0.24,hf_gain=1.45,flat_guard=0.92,temp_sense=0.68,clamp_amt=0.026
# Edge-aware sharpen â€” **reined in** but still strong
glsl-shaders-append="~~/shaders/masked_sharpen.glsl"
glsl-shader-opts=strength=0.40,clamp_amt=0.038,edge_low=0.02,edge_high=0.24,flat_protect=0.88,motion_gate=0.65,gamma_in=1.0,gamma_out=1.0
# Temporal sharpen (TXAA-lite; keep modest)
glsl-shaders-append="~~/shaders/temporal_sharpen.glsl"
glsl-shader-opts=strength=1.50,motion_sense=0.65,decay=0.85,radius=1.0,clamp_amt=0.028,thresh=0.018,gamma_in=1.0,gamma_out=1.0
# Micro-contrast (depth/pop; very safe)
glsl-shaders-append="~~/shaders/micro_contrast.glsl"
glsl-shader-opts=radius=1.0,amount=0.10,threshold=0.02,gamma_in=1.0,gamma_out=1.0

# Tone adaptation
# Smart logarithmic color expansion (adaptive, hue-safe)
#glsl-shaders-append="~~/shaders/color_expand_log_adaptive.glsl"
#glsl-shader-opts=black_level=0.062561,white_level=0.918367,log_strength=12.0,exponent_weight=0.85,adapt_floor=0.68,adapt_ceiling=1.18,adapt_pivot=0.18,adapt_contrast=0.60,chroma_preserve=0.18,soft_knee=0.02
# Vibrance (OkLab, luma-preserving, skin-protect)
#glsl-shaders-append="~~/shaders/vibrance_oklab.glsl"
#glsl-shader-opts=vibrance=0.14,skin_protect=0.65,mid_bias=0.18,gamma_in=1.0,gamma_out=1.0
# Chroma Pop (local chroma contrast, luma-safe)

# Light analog filtering
# Very light regular CRT like effect
glsl-shaders-append="~~/shaders/crt_natural.glsl"
glsl-shader-opts=scan_amp=0.10,scan_curve=1.02,bloom_strength=0.05,bloom_radius=1.20,mask_strength=0.12,mask_soft=0.25,chroma_preserve=0.88,sat_boost=1.06,black_lift=0.010,gamma_in=1.0,gamma_out=1.0
# Light temporal texture
glsl-shaders-append="~~/shaders/temporal_blue_grain.glsl"
glsl-shader-opts=strength=0.01,chroma=0.5,grain_size=1.2

# Luminosity compensation + blending
brightness=1

glsl-shaders-append="~~/shaders-dl/adaptive_sharpen_RT.glsl"
glsl-shaders-append="~~/shaders-dl/LumaSharpen.glsl"